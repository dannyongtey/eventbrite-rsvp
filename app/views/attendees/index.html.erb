<% provide(:title, "Attendees") %>
<h1>Attendees</h1>
<div class = "row">
	<div class = "col-md-12">
		<%= link_to "Update database", events_path, method: "post", class: "btn btn-lg btn-primary" %>
	<%= form_for(:send, url: event_attendees_path(event_id: params["event_id"])) do |f| %>
		<%= f.label :Type %>
		<br>
		<%= label :type_RSVP, "RSVP" %>
		<%= f.radio_button :type, "RSVP" %>
		<%= label :type_email, "Email" %>
		<%= f.radio_button :type, "email" %>
		<br>
		<%= f.label :target %>
		<br></br>
		<%= label :checkbox_target, "All" %>
		<%= f.check_box :target, {}, "all" %>
		<%= label :checkbox_target, "Attending" %>
		<%= f.check_box :target, {}, "attending" %>
		<%= label :checkbox_target, "Not Attending" %>
		<%= f.check_box :target, {}, "not_attending" %>
		<%= label :checkbox_target, "Not RSVPed" %>
		<%= f.check_box :target, {}, "new" %>

		<%= f.submit "Send", class: "btn btn-primary" %>
	<% end %>
	</div>
</div>
<br>
<table class ="table">
	<thead>
		<tr>
			<th>No</th>
			<th>Name</th>
			<th>Email</th>
			<th>RSVP status</th>
			<th>Action</th>
		</tr>
	</thead>

	<tbody>
	<% @attendees.each_with_index do |attendee, index| %>
		<tr>
			<td><%= index+1 %></td>
			<td><%= attendee.name %></td>
			<td><%= attendee.email %></td>
			<% if attendee.attending.nil? %>
			<td>Not sent</td>
			<% else %>
			<td><%= attendee.attending? %></td>
			<% end %>
			<td><%= link_to "Send email", "mailto:#{attendee.email}" %> </td>
		</tr>
	<% end %>
	</tbody>
</table>


